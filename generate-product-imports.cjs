const fs = require('fs');
const path = require('path');

const produtosDir = './src/assets/produtos/produto';
const outputFile = './src/lib/productImages.ts';

// Lê todos os arquivos .jpg
const files = fs.readdirSync(produtosDir)
  .filter(f => f.endsWith('.jpg'))
  .filter(f => !f.includes('Thumbs.db'))
  .filter(f => !f.includes('Camada'))
  .filter(f => !f.includes(' copiar'))
  .filter(f => !f.includes(' '))
  .sort();

console.log(`📁 Encontrados ${files.length} arquivos de imagem`);

// Gera o arquivo TypeScript
let content = `// Auto-generated file - DO NOT EDIT MANUALLY
// Generated by generate-product-imports.cjs
// Total images: ${files.length}

`;

// Adiciona os imports
files.forEach((file, index) => {
  const varName = `img${String(index + 1).padStart(3, '0')}`;
  content += `import ${varName} from '@/assets/produtos/produto/${file}';\n`;
});

content += `\n// Mapa de SKU para imagem\nexport const productImageMap: Record<string, string> = {\n`;

// Adiciona o mapa
files.forEach((file, index) => {
  const varName = `img${String(index + 1).padStart(3, '0')}`;
  const sku = file.replace('.jpg', '').replace(/_/g, '').replace(/-/g, '');
  content += `  '${sku}': ${varName},\n`;
});

content += `};\n\n`;
content += `// Lista de todos os SKUs\nexport const allSKUs = Object.keys(productImageMap);\n`;
content += `console.log('📸 Imagens de produtos carregadas:', allSKUs.length);\n`;

// Escreve o arquivo
fs.writeFileSync(outputFile, content);
console.log(`✅ Arquivo gerado com sucesso: ${outputFile}`);
console.log(`📊 Total de produtos: ${files.length}`);

